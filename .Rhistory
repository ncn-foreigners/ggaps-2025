avg_comparisons(fit_distribu, variables = "treat", newdata = subset(treat == 1))
avg_comparisons(fit_ses_standard, variables = "treat", newdata = subset(treat == 1))
avg_comparisons(fit_ses_distribu, variables = "treat", newdata = subset(treat == 1))
rbind(
avg_comparisons(fit_ses_standard, variables = "treat", newdata = subset(treat == 1)),
avg_comparisons(fit_ses_distribu, variables = "treat", newdata = subset(treat == 1))
)
tab1 <- avg_comparisons(fit_ses_standard, variables = "treat", newdata = subset(treat == 1)),
tab2 <- avg_comparisons(fit_ses_distribu, variables = "treat", newdata = subset(treat == 1))
tab1 <- avg_comparisons(fit_ses_standard, variables = "treat", newdata = subset(treat == 1))
tab2 <- avg_comparisons(fit_ses_distribu, variables = "treat", newdata = subset(treat == 1))
rbind(tab1, tab2)
rbind(tab1, tab2) |> xtabs()
rbind(tab1, tab2) |> xtable()
rbind(tab1, tab2) |> xtable::xtable()
fit_ses_standard <- lm_weightit(earningsHour ~ treat*(age + location + education + contract + lengthService + weeks + hoursPaid),
data = ses, weightit = ses_standard)
fit_ses_distribu <- lm_weightit(earningsHour ~ treat*(age + location + education + contract + lengthService + weeks + hoursPaid),
data = ses, weightit = ses_distribu)
tab1 <- avg_comparisons(fit_ses_standard, variables = "treat", newdata = subset(treat == 1))
tab2 <- avg_comparisons(fit_ses_distribu, variables = "treat", newdata = subset(treat == 1))
rbind(tab1, tab2)
ses_standard <- weightit(treat ~ weeks + hoursPaid,
data = ses, estimand = "ATT", method = "ebal",
s.weights = ses$s_weight)
ses_distribu <- weightit(treat ~ weeks + hoursPaid,
data = ses, estimand = "ATT", method = "ebal",
s.weights = ses$s_weight,
quantile = list(hoursPaid = c(0.1, 0.25, 0.5, 0.75, 0.9),
weeks = c(0.1, 0.25, 0.5, 0.75, 0.9)))
bal.tab(ses_standard, stats = c("m", "v", "ks"), thresholds = c(m = .05))
bal.tab(ses_distribu, stats = c("m", "v", "ks"), thresholds = c(m = .05))
fit_ses_standard <- lm_weightit(earningsHour ~ treat*(weeks + hoursPaid),
data = ses, weightit = ses_standard)
fit_ses_distribu <- lm_weightit(earningsHour ~ treat*(weeks + hoursPaid),
data = ses, weightit = ses_distribu)
tab1 <- avg_comparisons(fit_ses_standard, variables = "treat", newdata = subset(treat == 1))
tab2 <- avg_comparisons(fit_ses_distribu, variables = "treat", newdata = subset(treat == 1))
rbind(tab1, tab2)
ses
ses$fullPart
data("ses")
ses$treat <- ses$sex == "female"
ses$s_weight <- ses$weights/mean(ses$weights)
ses <- subset(ses, fullPart == "FT")
head(ses)
nrow(ses)
data("ses")
ses$treat <- ses$sex == "female"
ses <- subset(ses, fullPart == "FT")
ses$s_weight <- ses$weights/mean(ses$weights)
head(ses)
ses_standard <- weightit(treat ~ age + location + education + contract + lengthService + weeks + hoursPaid,
data = ses,
estimand = "ATT", method = "ebal",
s.weights = ses$s_weight)
ses_distribu <- weightit(treat ~ age + location + education + contract + lengthService  + weeks + hoursPaid,
data = ses,
estimand = "ATT", method = "ebal",
s.weights = ses$s_weight,
quantile = list(hoursPaid = c(0.1, 0.25, 0.5, 0.75, 0.9),
weeks = c(0.1, 0.25, 0.5, 0.75, 0.9)))
bal.tab(ses_standard, stats = c("m", "v", "ks"), thresholds = c(m = .05))
bal.tab(ses_distribu, stats = c("m", "v", "ks"), thresholds = c(m = .05))
fit_ses_standard <- lm_weightit(earningsHour ~ treat*(age + location + education + contract + lengthService + weeks + hoursPaid),
data = ses, weightit = ses_standard)
fit_ses_distribu <- lm_weightit(earningsHour ~ treat*(age + location + education + contract + lengthService + weeks + hoursPaid),
data = ses, weightit = ses_distribu)
tab1 <- avg_comparisons(fit_ses_standard, variables = "treat", newdata = subset(treat == 1))
tab2 <- avg_comparisons(fit_ses_distribu, variables = "treat", newdata = subset(treat == 1))
rbind(tab1, tab2)
data("ses")
ses$treat <- ses$sex == "female"
ses <- subset(ses, fullPart == "PT")
ses$s_weight <- ses$weights/mean(ses$weights)
head(ses)
ses_standard <- weightit(treat ~ age + location + education + contract + lengthService + weeks + hoursPaid,
data = ses,
estimand = "ATT", method = "ebal",
s.weights = ses$s_weight)
ses_distribu <- weightit(treat ~ age + location + education + contract + lengthService  + weeks + hoursPaid,
data = ses,
estimand = "ATT", method = "ebal",
s.weights = ses$s_weight,
quantile = list(hoursPaid = c(0.1, 0.25, 0.5, 0.75, 0.9),
weeks = c(0.1, 0.25, 0.5, 0.75, 0.9)))
bal.tab(ses_standard, stats = c("m", "v", "ks"), thresholds = c(m = .05))
bal.tab(ses_distribu, stats = c("m", "v", "ks"), thresholds = c(m = .05))
fit_ses_standard <- lm_weightit(earningsHour ~ treat*(age + location + education + contract + lengthService + weeks + hoursPaid),
data = ses, weightit = ses_standard)
fit_ses_distribu <- lm_weightit(earningsHour ~ treat*(age + location + education + contract + lengthService + weeks + hoursPaid),
data = ses, weightit = ses_distribu)
tab1 <- avg_comparisons(fit_ses_standard, variables = "treat", newdata = subset(treat == 1))
tab2 <- avg_comparisons(fit_ses_distribu, variables = "treat", newdata = subset(treat == 1))
rbind(tab1, tab2)
table(ses$size)
data("ses")
ses$treat <- ses$sex == "female"
ses <- subset(ses, size == "E1000")
ses$s_weight <- ses$weights/mean(ses$weights)
head(ses)
ses_standard <- weightit(treat ~ age + location + education + contract + lengthService + weeks + hoursPaid,
data = ses,
estimand = "ATT", method = "ebal",
s.weights = ses$s_weight)
ses_distribu <- weightit(treat ~ age + location + education + contract + lengthService  + weeks + hoursPaid,
data = ses,
estimand = "ATT", method = "ebal",
s.weights = ses$s_weight,
quantile = list(hoursPaid = c(0.1, 0.25, 0.5, 0.75, 0.9),
weeks = c(0.1, 0.25, 0.5, 0.75, 0.9)))
ses
ses_standard <- weightit(treat ~ age + education + contract + lengthService + weeks + hoursPaid,
data = ses,
estimand = "ATT", method = "ebal",
s.weights = ses$s_weight)
ses_standard <- weightit(treat ~ age + education + contract + lengthService + weeks + hoursPaid,
data = ses,
estimand = "ATT", method = "ebal",
s.weights = ses$s_weight)
ses_distribu <- weightit(treat ~ age + education + contract + lengthService  + weeks + hoursPaid,
data = ses,
estimand = "ATT", method = "ebal",
s.weights = ses$s_weight,
quantile = list(hoursPaid = c(0.1, 0.25, 0.5, 0.75, 0.9),
weeks = c(0.1, 0.25, 0.5, 0.75, 0.9)))
ses_standard <- weightit(treat ~ age + location + education + contract + lengthService + weeks + hoursPaid,
data = ses,
estimand = "ATT", method = "ebal",
s.weights = ses$s_weight)
ses_distribu <- weightit(treat ~ age + location + education + contract + lengthService  + weeks + hoursPaid,
data = ses,
estimand = "ATT", method = "ebal",
s.weights = ses$s_weight,
quantile = list(hoursPaid = c(0.1, 0.25, 0.5, 0.75, 0.9),
weeks = c(0.1, 0.25, 0.5, 0.75, 0.9)))
dim(ses)
ses_standard <- weightit(treat ~ age + location + education + contract + weeks + hoursPaid,
data = ses,
estimand = "ATT", method = "ebal",
s.weights = ses$s_weight)
ses_distribu <- weightit(treat ~ age + location + education + contract +  weeks + hoursPaid,
data = ses,
estimand = "ATT", method = "ebal",
s.weights = ses$s_weight,
quantile = list(hoursPaid = c(0.1, 0.25, 0.5, 0.75, 0.9),
weeks = c(0.1, 0.25, 0.5, 0.75, 0.9)))
table(ses$payAgreement)
data("ses")
ses$treat <- ses$sex == "female"
ses$s_weight <- ses$weights/mean(ses$weights)
head(ses)
ses_standard <- weightit(treat ~ age + location + education + contract + lengthService + weeks + hoursPaid,
data = ses,
estimand = "ATT", method = "ebal",
s.weights = ses$s_weight)
ses_distribu <- weightit(treat ~ age + location + education + contract + lengthService  + weeks + hoursPaid,
data = ses,
estimand = "ATT", method = "ebal",
s.weights = ses$s_weight,
quantile = list(hoursPaid = c(0.1, 0.25, 0.5, 0.75, 0.9),
weeks = c(0.1, 0.25, 0.5, 0.75, 0.9)))
bal.tab(ses_standard, stats = c("m", "v", "ks"), thresholds = c(m = .05))
bal.tab(ses_distribu, stats = c("m", "v", "ks"), thresholds = c(m = .05))
fit_ses_standard <- lm_weightit(earningsHour ~ treat*(age + location + education + contract + lengthService + weeks + hoursPaid),
data = ses, weightit = ses_standard)
fit_ses_distribu <- lm_weightit(earningsHour ~ treat*(age + location + education + contract + lengthService + weeks + hoursPaid),
data = ses, weightit = ses_distribu)
tab1 <- avg_comparisons(fit_ses_standard, variables = "treat", newdata = subset(treat == 1))
tab2 <- avg_comparisons(fit_ses_distribu, variables = "treat", newdata = subset(treat == 1))
rbind(tab1, tab2)
ses
fit_ses_standard <- lm_weightit(earnings ~ treat*(age + location + education + contract + lengthService + weeks + hoursPaid),
data = ses, weightit = ses_standard)
fit_ses_distribu <- lm_weightit(earnings ~ treat*(age + location + education + contract + lengthService + weeks + hoursPaid),
data = ses, weightit = ses_distribu)
tab1 <- avg_comparisons(fit_ses_standard, variables = "treat", newdata = subset(treat == 1))
tab2 <- avg_comparisons(fit_ses_distribu, variables = "treat", newdata = subset(treat == 1))
rbind(tab1, tab2)
fit_ses_standard <- lm_weightit(earningsHour ~ treat*(age + location + education + contract + lengthService + weeks + hoursPaid),
data = ses, weightit = ses_standard)
fit_ses_distribu <- lm_weightit(earningsHour ~ treat*(age + location + education + contract + lengthService + weeks + hoursPaid),
data = ses, weightit = ses_distribu)
tab1 <- avg_comparisons(fit_ses_standard, variables = "treat", newdata = subset(treat == 1))
tab2 <- avg_comparisons(fit_ses_distribu, variables = "treat", newdata = subset(treat == 1))
rbind(tab1, tab2)
bal.plot(ses_distribu)
bal.plot(ses_distribu, var.name = "weeks")
bal.plot(ses_standard, var.name = "weeks")
bal.plot(hoursPaid, var.name = "weeks")
bal.plot(ses_standard, var.name = "hoursPaid")
bal.plot(ses_distribu, var.name = "hoursPaid")
ses_standard <- weightit(treat ~ age + location + education + contract + lengthService + weeks + hoursPaid,
data = ses,
estimand = "ATT", method = "ebal",
s.weights = ses$s_weight)
ses_distribu <- weightit(treat ~ age + location + education + contract + lengthService  + weeks + hoursPaid,
data = ses,
estimand = "ATT", method = "ebal",
s.weights = ses$s_weight,
quantile = list(hoursPaid = seq(0.1, 0.9, 0.1),
weeks = seq(0.1, 0.9, 0.1)))
ses_standard <- weightit(treat ~ age + location + education + contract + lengthService + weeks + hoursPaid,
data = ses,
estimand = "ATT", method = "ebal",
s.weights = ses$s_weight)
ses_distribu <- weightit(treat ~ age + location + education + contract + lengthService  + weeks + hoursPaid,
data = ses,
estimand = "ATT", method = "ebal",
s.weights = ses$s_weight,
quantile = list(hoursPaid = seq(0.1, 0.9, 0.1),
weeks = seq(0.1, 0.9, 0.1)))
ses_standard <- weightit(treat ~ age + location + education + contract + lengthService + weeks + hoursPaid,
data = ses,
estimand = "ATT", method = "ebal",
s.weights = ses$s_weight)
ses_distribu <- weightit(treat ~ age + location + education + contract + lengthService  + weeks + hoursPaid,
data = ses,
estimand = "ATT", method = "ebal",
s.weights = ses$s_weight,
quantile = list(hoursPaid = seq(0.1, 0.9, 0.1),
weeks = c(0.1, 0.25, 0.5, 0.75, 0.9)))
ses_standard <- weightit(treat ~ age + location + education + contract + lengthService + weeks + hoursPaid,
data = ses,
estimand = "ATT", method = "ebal",
s.weights = ses$s_weight)
ses_distribu <- weightit(treat ~ age + location + education + contract + lengthService  + weeks + hoursPaid,
data = ses,
estimand = "ATT", method = "ebal",
s.weights = ses$s_weight,
quantile = list(hoursPaid = seq(0.1, 0.25, 0.5, 0.75, 0.9),
weeks = seq(0.1, 0.9, 0.1)))
ses_standard <- weightit(treat ~ age + location + education + contract + lengthService + weeks + hoursPaid,
data = ses,
estimand = "ATT", method = "ebal",
s.weights = ses$s_weight)
ses_distribu <- weightit(treat ~ age + location + education + contract + lengthService  + weeks + hoursPaid,
data = ses,
estimand = "ATT", method = "ebal",
s.weights = ses$s_weight,
quantile = list(hoursPaid = c(0.1, 0.25, 0.5, 0.75, 0.9),
weeks = seq(0.1, 0.9, 0.1)))
bal.tab(ses_standard, stats = c("m", "v", "ks"), thresholds = c(m = .05))
bal.tab(ses_distribu, stats = c("m", "v", "ks"), thresholds = c(m = .05))
fit_ses_standard <- lm_weightit(earningsHour ~ treat*(age + location + education + contract + lengthService + weeks + hoursPaid),
data = ses, weightit = ses_standard)
fit_ses_distribu <- lm_weightit(earningsHour ~ treat*(age + location + education + contract + lengthService + weeks + hoursPaid),
data = ses, weightit = ses_distribu)
tab1 <- avg_comparisons(fit_ses_standard, variables = "treat", newdata = subset(treat == 1))
tab2 <- avg_comparisons(fit_ses_distribu, variables = "treat", newdata = subset(treat == 1))
rbind(tab1, tab2)
bal.plot(ses_standard, var.name = "hoursPaid")
bal.plot(ses_distribu, var.name = "hoursPaid")
bal.plot(ses_distribu, var.name = "weeks")
bal.plot(ses_standard, var.name = "weeks")
ses_standard <- weightit(treat ~ age + location + education + contract + lengthService + weeks + hoursPaid,
data = ses,
estimand = "ATT", method = "ebal",
s.weights = ses$s_weight)
ses_distribu <- weightit(treat ~ age + location + education + contract + lengthService  + weeks + hoursPaid,
data = ses,
estimand = "ATT", method = "ebal",
s.weights = ses$s_weight,
quantile = list(hoursPaid = c(0.10, 0.20, 0.25, 0.5, 0.75, 0.90),
weeks = seq(0.1, 0.9, 0.1)))
ses_standard <- weightit(treat ~ age + location + education + contract + lengthService + weeks + hoursPaid,
data = ses,
estimand = "ATT", method = "ebal",
s.weights = ses$s_weight)
ses_distribu <- weightit(treat ~ age + location + education + contract + lengthService  + weeks + hoursPaid,
data = ses,
estimand = "ATT", method = "ebal",
s.weights = ses$s_weight,
quantile = list(hoursPaid = c(0.10, 0.25, 0.5, 0.75, 0.80, 0.90),
weeks = seq(0.1, 0.9, 0.1)))
bal.tab(ses_standard, stats = c("m", "v", "ks"), thresholds = c(m = .05))
bal.tab(ses_distribu, stats = c("m", "v", "ks"), thresholds = c(m = .05))
fit_ses_standard <- lm_weightit(earningsHour ~ treat*(age + location + education + contract + lengthService + weeks + hoursPaid),
data = ses, weightit = ses_standard)
fit_ses_distribu <- lm_weightit(earningsHour ~ treat*(age + location + education + contract + lengthService + weeks + hoursPaid),
data = ses, weightit = ses_distribu)
tab1 <- avg_comparisons(fit_ses_standard, variables = "treat", newdata = subset(treat == 1))
tab2 <- avg_comparisons(fit_ses_distribu, variables = "treat", newdata = subset(treat == 1))
rbind(tab1, tab2)
ses_standard <- weightit(treat ~ age + location + education + contract + lengthService + weeks + hoursPaid,
data = ses,
estimand = "ATT", method = "ebal",
s.weights = ses$s_weight)
ses_distribu <- weightit(treat ~ age + location + education + contract + lengthService  + weeks + hoursPaid,
data = ses,
estimand = "ATT", method = "ebal",
s.weights = ses$s_weight,
quantile = list(hoursPaid = c(0.10, 0.25, 0.5, 0.75, 0.90),
weeks = c(0.10, 0.25, 0.5, 0.75, 0.90)))
ses_standard <- weightit(treat ~ age + location + education + contract + lengthService + weeks + hoursPaid,
data = ses,
estimand = "ATT", method = "ebal",
s.weights = ses$s_weight)
ses_distribu <- weightit(treat ~ age + location + education + contract + lengthService  + weeks + hoursPaid,
data = ses,
estimand = "ATT", method = "ebal",
s.weights = ses$s_weight,
quantile = list(hoursPaid = c(0.5),
weeks = c(0.5)))
bal.tab(ses_standard, stats = c("m", "v", "ks"), thresholds = c(m = .05))
bal.tab(ses_distribu, stats = c("m", "v", "ks"), thresholds = c(m = .05))
fit_ses_standard <- lm_weightit(earningsHour ~ treat*(age + location + education + contract + lengthService + weeks + hoursPaid),
data = ses, weightit = ses_standard)
fit_ses_distribu <- lm_weightit(earningsHour ~ treat*(age + location + education + contract + lengthService + weeks + hoursPaid),
data = ses, weightit = ses_distribu)
tab1 <- avg_comparisons(fit_ses_standard, variables = "treat", newdata = subset(treat == 1))
tab2 <- avg_comparisons(fit_ses_distribu, variables = "treat", newdata = subset(treat == 1))
rbind(tab1, tab2)
ses_standard <- weightit(treat ~ age + location + education + contract + lengthService + weeks + hoursPaid,
data = ses,
estimand = "ATT", method = "ebal",
s.weights = ses$s_weight)
ses_distribu <- weightit(treat ~ age + location + education + contract + lengthService  + weeks + hoursPaid,
data = ses,
estimand = "ATT", method = "ebal",
s.weights = ses$s_weight,
quantile = list(hoursPaid = c(0.10, 0.25, 0.5, 0.75, 0.90),
weeks = c(0.10, 0.25, 0.5, 0.75, 0.90)))
library("WeightIt")
library("laeken")
library("cobalt")
library("marginaleffects")
data("ses")
ses$treat <- ses$sex == "female"
ses$s_weight <- ses$weights/mean(ses$weights)
head(ses)
ses_standard <- weightit(treat ~ age + location + education + contract + lengthService + weeks + hoursPaid,
data = ses,
estimand = "ATT", method = "ebal",
s.weights = ses$s_weight)
ses_distribu <- weightit(treat ~ age + location + education + contract + lengthService  + weeks + hoursPaid,
data = ses,
estimand = "ATT", method = "ebal",
s.weights = ses$s_weight,
quantile = list(hoursPaid = c(0.10, 0.25, 0.5, 0.75, 0.90),
weeks = c(0.10, 0.25, 0.5, 0.75, 0.90)))
bal.tab(ses_standard, stats = c("m", "v", "ks"), thresholds = c(m = .05))
bal.tab(ses_distribu, stats = c("m", "v", "ks"), thresholds = c(m = .05))
fit_ses_standard <- lm_weightit(earningsHour ~ treat*(age + location + education + contract + lengthService + weeks + hoursPaid),
data = ses, weightit = ses_standard)
fit_ses_distribu <- lm_weightit(earningsHour ~ treat*(age + location + education + contract + lengthService + weeks + hoursPaid),
data = ses, weightit = ses_distribu)
tab1 <- avg_comparisons(fit_ses_standard, variables = "treat", newdata = subset(treat == 1))
tab2 <- avg_comparisons(fit_ses_distribu, variables = "treat", newdata = subset(treat == 1))
rbind(tab1, tab2)
data("eusilc")
head(eusilc)
eusilc_singles <- subset(eusilc, hsize == 1)
eusilc_singles$treat <- eusilc_singles$rb090 == "female"
eusilc_singles$pl030_new <- ifelse(eusilc_singles$pl030 %in% c("6","7"), "6", eusilc_singles$pl030)
eusilc_singles$s_weight <- eusilc_singles$rb050/mean(eusilc_singles$rb050)
eusilc_singles <- subset(eusilc_singles,
select = c(treat, eqIncome,
rb090, db040, age, pl030, pl030_new,
pb220a,
py010n, py100n, py050n,  py090n,
s_weight))
standard <- weightit(treat ~ db040 + pb220a + pl030_new + age + I(age^2),
data = eusilc_singles, estimand = "ATT", method = "ebal",
s.weights = eusilc_singles$s_weight)
distribu <- weightit(treat ~ db040 + pb220a + pl030_new + age + I(age^2),
data = eusilc_singles, estimand = "ATT", method = "ebal",
s.weights = eusilc_singles$s_weight,
quantile = list(age = seq(0.1, 0.9, 0.1)))
bal.tab(standard, stats = c("m", "v", "ks"), thresholds = c(m = .05))
bal.tab(distribu, stats = c("m", "v", "ks"), thresholds = c(m = .05))
fit_standard <- lm_weightit(eqIncome ~ treat*(db040 + pb220a + pl030_new + age + I(age^2)),
data = eusilc_singles, weightit = standard)
fit_distribu <- lm_weightit(eqIncome ~ treat*(db040 + pb220a + pl030_new + age + I(age^2)),
data = eusilc_singles, weightit = distribu)
avg_comparisons(fit_standard, variables = "treat", newdata = subset(treat == 1))
avg_comparisons(fit_distribu, variables = "treat", newdata = subset(treat == 1))
fit_ses_standard <- lm_weightit(earningsMonth ~ treat*(age + location + education + contract + lengthService + weeks + hoursPaid),
data = ses, weightit = ses_standard)
fit_ses_distribu <- lm_weightit(earningsMonth ~ treat*(age + location + education + contract + lengthService + weeks + hoursPaid),
data = ses, weightit = ses_distribu)
tab1 <- avg_comparisons(fit_ses_standard, variables = "treat", newdata = subset(treat == 1))
tab2 <- avg_comparisons(fit_ses_distribu, variables = "treat", newdata = subset(treat == 1))
rbind(tab1, tab2)
View(ses)
ggplot(data=ses,aes(x = hoursPaid, color = treat)) + geom_density()
ggplot(data=ses,aes(x = hoursPaid, color = treat)) + stat_ecdf()
ggplot(data=ses,aes(x = paymentsShiftWork, color = treat)) + stat_ecdf()
ggplot(data=ses,aes(x = notPaid, color = treat)) + stat_ecdf()
ggplot(data=ses,aes(x = holiday, color = treat)) + stat_ecdf()
ggplot(data=ses,aes(x = overtimeHours, color = treat)) + stat_ecdf()
ggplot(data=ses,aes(x = hoursPaid, color = treat)) + stat_ecdf()
with(ses, plot(hoursPaid, weeks))
ggplot(data=ses,aes(x = weeks, color = treat)) + stat_ecdf()
ses_standard <- weightit(treat ~ age + location + education + contract + lengthService + hoursPaid,
data = ses,
estimand = "ATT", method = "ebal",
s.weights = ses$s_weight)
ses_distribu <- weightit(treat ~ age + location + education + contract + lengthService  + hoursPaid,
data = ses,
estimand = "ATT", method = "ebal",
s.weights = ses$s_weight,
quantile = list(hoursPaid = c(0.10, 0.25, 0.5, 0.75, 0.90),
weeks = c(0.10, 0.25, 0.5, 0.75, 0.90)))
ses_standard <- weightit(treat ~ age + location + education + contract + lengthService + hoursPaid,
data = ses,
estimand = "ATT", method = "ebal",
s.weights = ses$s_weight)
ses_distribu <- weightit(treat ~ age + location + education + contract + lengthService  + hoursPaid,
data = ses,
estimand = "ATT", method = "ebal",
s.weights = ses$s_weight,
quantile = list(hoursPaid = c(0.10, 0.25, 0.5, 0.75, 0.90)))
bal.tab(ses_standard, stats = c("m", "v", "ks"), thresholds = c(m = .05))
bal.tab(ses_distribu, stats = c("m", "v", "ks"), thresholds = c(m = .05))
fit_ses_standard <- lm_weightit(earningsHour ~ treat*(age + location + education + contract + lengthService  + hoursPaid),
data = ses, weightit = ses_standard)
fit_ses_distribu <- lm_weightit(earningsHour ~ treat*(age + location + education + contract + lengthService  + hoursPaid),
data = ses, weightit = ses_distribu)
tab1 <- avg_comparisons(fit_ses_standard, variables = "treat", newdata = subset(treat == 1))
tab2 <- avg_comparisons(fit_ses_distribu, variables = "treat", newdata = subset(treat == 1))
rbind(tab1, tab2)
ses
ses$occupation
table(ses$occupation)
ses$occup1 <- substr(ses$occupation)
data("ses")
ses$treat <- ses$sex == "female"
ses$s_weight <- ses$weights/mean(ses$weights)
ses$occup1 <- substr(ses$occupation,1,1)
head(ses)
ses_standard <- weightit(treat ~ age + location + occup1 + education + contract + lengthService + weeks + hoursPaid,
data = ses,
estimand = "ATT", method = "ebal",
s.weights = ses$s_weight)
ses_distribu <- weightit(treat ~ age + location + occup1 + education + contract + lengthService  + weeks + hoursPaid,
data = ses,
estimand = "ATT", method = "ebal",
s.weights = ses$s_weight,
quantile = list(hoursPaid = c(0.10, 0.25, 0.5, 0.75, 0.90),
weeks = c(0.10, 0.25, 0.5, 0.75, 0.90)))
bal.tab(ses_standard, stats = c("m", "v", "ks"), thresholds = c(m = .05))
bal.tab(ses_distribu, stats = c("m", "v", "ks"), thresholds = c(m = .05))
fit_ses_standard <- lm_weightit(earningsHour ~ treat*(age + location + education + contract + lengthService + weeks + hoursPaid),
data = ses, weightit = ses_standard)
fit_ses_distribu <- lm_weightit(earningsHour ~ treat*(age + location + education + contract + lengthService + weeks + hoursPaid),
data = ses, weightit = ses_distribu)
tab1 <- avg_comparisons(fit_ses_standard, variables = "treat", newdata = subset(treat == 1))
tab2 <- avg_comparisons(fit_ses_distribu, variables = "treat", newdata = subset(treat == 1))
rbind(tab1, tab2)
fit_ses_standard <- lm_weightit(earningsHour ~ treat*(age + location + occup1 + education + contract + lengthService + weeks + hoursPaid),
data = ses, weightit = ses_standard)
fit_ses_distribu <- lm_weightit(earningsHour ~ treat*(age + location + occup1 + education + contract + lengthService + weeks + hoursPaid),
data = ses, weightit = ses_distribu)
tab1 <- avg_comparisons(fit_ses_standard, variables = "treat", newdata = subset(treat == 1))
tab2 <- avg_comparisons(fit_ses_distribu, variables = "treat", newdata = subset(treat == 1))
rbind(tab1, tab2)
ses_standard <- weightit(treat ~ age + location + education + contract + lengthService + weeks + hoursPaid,
data = ses,
estimand = "ATT", method = "ebal",
s.weights = ses$s_weight)
ses_distribu <- weightit(treat ~ age + location + education + contract + lengthService  + weeks + hoursPaid,
data = ses,
estimand = "ATT", method = "ebal",
s.weights = ses$s_weight,
quantile = list(hoursPaid = c(0.10, 0.25, 0.5, 0.75, 0.90),
weeks = c(0.10, 0.25, 0.5, 0.75, 0.90)))
data("ses")
ses$treat <- ses$sex == "female"
ses$s_weight <- ses$weights/mean(ses$weights)
ses$occup1 <- substr(ses$occupation,1,1)
head(ses)
ses_standard <- weightit(treat ~ age + location + education + contract + lengthService + weeks + hoursPaid,
data = ses,
estimand = "ATT", method = "ebal",
s.weights = ses$s_weight)
ses_distribu <- weightit(treat ~ age + location + education + contract + lengthService  + weeks + hoursPaid,
data = ses,
estimand = "ATT", method = "ebal",
s.weights = ses$s_weight,
quantile = list(hoursPaid = c(0.10, 0.25, 0.5, 0.75, 0.90),
weeks = c(0.10, 0.25, 0.5, 0.75, 0.90)))
ses_standard <- weightit(treat ~ age + location + education + contract + lengthService + weeks + hoursPaid,
data = ses,
estimand = "ATT", method = "ebal",
s.weights = ses$s_weight)
ses_distribu <- weightit(treat ~ age + location + education + contract + lengthService  + weeks + hoursPaid,
data = ses,
estimand = "ATT", method = "ebal",
s.weights = ses$s_weight,
quantile = list(hoursPaid = c(0.10, 0.25, 0.5, 0.75, 0.90),
weeks = c(0.10, 0.25, 0.5, 0.75, 0.90)))
bal.tab(ses_standard, stats = c("m", "v", "ks"), thresholds = c(m = .05))
bal.tab(ses_distribu, stats = c("m", "v", "ks"), thresholds = c(m = .05))
bal.tab(ses_standard, stats = c("m", "v", "ks", "ovl"), thresholds = c(m = .05))
bal.tab(ses_distribu, stats = c("m", "v", "ks", "ovl"), thresholds = c(m = .05))
fit_ses_standard <- lm_weightit(earningsHour ~ treat*(age + location + education + contract + lengthService + weeks + hoursPaid),
data = ses, weightit = ses_standard)
fit_ses_distribu <- lm_weightit(earningsHour ~ treat*(age + location + education + contract + lengthService + weeks + hoursPaid),
data = ses, weightit = ses_distribu)
tab1 <- avg_comparisons(fit_ses_standard, variables = "treat", newdata = subset(treat == 1))
tab2 <- avg_comparisons(fit_ses_distribu, variables = "treat", newdata = subset(treat == 1))
rbind(tab1, tab2)
library(haven)
read_stata("http://fmwww.bc.edu/RePEc/bocode/h/homecomp.dta")
read_stata("http://fmwww.bc.edu/RePEc/bocode/h/homecomp.dta") ->mm
View(mm)
summary(http://fmwww.bc.edu/RePEc/bocode/h/homecomp.dta)
summary(mm)
boxplot(homecomp ~ age, mm)
boxplot(age ~ homecomp], mm)
boxplot(age ~ homecomp, mm)
